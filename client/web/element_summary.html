<!-- Copyright (c) 2013, the Dart project authors.  Please see the AUTHORS file
     for details. All rights reserved. Use of this source code is governed by a
     BSD-style license that can be found in the LICENSE file. -->
<!DOCTYPE html>
<html>
  <head>
    <link rel="components" href="doc_link.html">
    <link rel="components" href="details.html">
    <link rel="components" href="kind_icon.html">
  </head>

  <body>
  <element name="x-member-blocks" extends="div">
    <template>
      <template iterate='block in blocks'>
        <div class="{{block.kindCssClass}}">
          <h3 class="member-block-title">{{block.kindTitle}}</h3>
          <template iterate='element in block.elements'>
            <x-element-summary element="{{element}}"></x-element-summary>
          </template>
        </div>
      </template>
    </template>
    <script type="application/dart">
      import 'package:web_ui/web_ui.dart';
      import 'package:api_doc/ast.dart';
      import 'package:api_doc/model.dart';

      class MemberBlocks extends WebComponent {
        List<ElementBlock> blocks;
      }
    </script>
  </element>

  <element name="x-element-signature" extends="span">
    <template>
      <template instantiate="if element is! ClassElement">
        <span class="element-class">
          <template instantiate="if hasReturnType">
            <x-doc-link ref="{{element.returnType}}"></x-doc-link>
          </template>
        </span>
      </template>
      <x-kind-icon element="{{element}}"></x-kind-icon>
      <span class="element-definition">
        <span class="element-name"><x-doc-link ref="{{element}}" short="{{true}}"></x-doc-link></span><template instantiate="if hasArguments"><x-doc-parameter-list element="{{element}}"></x-doc-parameter-list></template>
      </span>
    </template>
    <script type="application/dart">
      import 'package:web_ui/web_ui.dart';
      import 'package:api_doc/ast.dart';
      import 'package:api_doc/model.dart';

      class ElementSignature extends WebComponent {
        Element element;

        bool get hasReturnType =>
          (element is MethodLikeElement || element is TypedefElement)
              && element.returnType != null;

        bool get hasArguments =>
          element is MethodElement || element is ConstructorElement
              || element is TypedefElement;
      }
    </script>
  </element>

  <element name="x-element-summary" extends="div">
    <template>
      <!--TODO(jacobr): use id instead of data-id and use a different escaping scheme-->
      <x-details class="element-details {{memberOrTypeClass}}"
          data-id="{{element.id}}"
          open="{{isOpen}}">
         <summary>
          <template if="element.originalParent != element.parent">
            <div class="parent-description">
              Defined by <x-doc-link ref="{{element.originalParent}}"></x-doc-link>
            </div>
          </template>
          <x-element-signature element="{{element}}">
          </x-element-signature>
      </summary>
        <x-summary-only>
          <div class="member-details-summary documentation">{{element.commentHtmlSnippet}}</div>
        </x-summary-only>
        <div class="documentation">{{element.commentHtml}}</div>
      </x-details>
    </template>
    <script type="application/dart">
      import 'package:web_ui/web_ui.dart';
      import 'package:api_doc/ast.dart';
      import 'package:api_doc/model.dart';

      class ElementSummary extends WebComponent {
        Element element;
        /** Whether we should display where the element was defined. */
        bool showParent = false;

        String get memberOrTypeClass =>
          (element is MethodLikeElement) ? 'member-details' : 'type-details';

        bool get isOpen =>
            currentMember != null && element.id == currentMember.id;
      }
    </script>
  </element>

  <element name="x-class-hierarchy-subtree" extends="div">
    <template>
      <template instantiate="if (index < clazz.superclasses.length)">
        <div><x-doc-link ref={{clazz.superclasses[index]}}></x-doc-link></div>
        <!-- TODO(jacobr): why doesn't it work to just put this class on the
             x-class-hierarchy-subtree node? -->
        <div class="child-subtree">
          <x-class-hierarchy-subtree clazz="{{clazz}}" index="{{index+1}}">
          </x-class-hierarchy-subtree>
        </div>
      </template>
      <template instantiate="if index == clazz.superclasses.length">
        <div><strong>{{clazz.shortDescription}}</strong></div>
      </template>
    </template>
    <script type="application/dart">
      // TODO(jacobr): this is kinda a rediculous way to do this
      import 'package:web_ui/web_ui.dart';
      import 'package:api_doc/ast.dart';
      import 'package:api_doc/model.dart';

      class ClassHierarchySubtree extends WebComponent {
        ClassElement clazz;
        int index;
      }
    </script>
  </element>

  <element name="x-class-hierarchy" extends="div">
    <template>
      <x-class-hierarchy-subtree clazz="{{clazz}}" index="{{0}}">
      </x-class-hierarchy-subtree>
    </template>
    <script type="application/dart">
      import 'package:web_ui/web_ui.dart';
      import 'package:api_doc/ast.dart';
      import 'package:api_doc/model.dart';

      class ClassHierarchy extends WebComponent {
        ClassElement clazz;
      }
    </script>
  </element>
</body></html>